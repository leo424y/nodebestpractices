[✔]: ../../assets/images/checkbox-small-blue.png

# 通用的Node.js Docker最佳實踐

此通用Docker指南部分包含所有程式語言中標準化的最佳實踐，並沒有針對Node.js的特殊解釋

## ![✔] 使用命令COPY優於ADD

**TL;DR:** COPY更安全，因為它只複製本地檔案，而ADD支援更高階的獲取，比如從遠端站點下載二進位制檔案

## ![✔] 避免更新基礎OS

**TL;DR:** 在構建期間更新本地二進位制檔案（例如apt get update）會在每次執行時建立不一致的映像，並且還需要提升許可權。取而代之，使用經常更新的基礎映象

## ![✔] 使用標籤對映象分類

**TL;DR:** 為每個映象提供後設資料（metadata）可能有助於Ops專業人員充分處理它。例如，包括維護人員姓名、構建日期和其他資訊，當有人需要對映像進行推理時，這些資訊可能會被證明是有用的

## ![✔] 使用非特權容器

**TL;DR:** 特權容器具有與主機上的根使用者相同的許可權和功能。這是很少需要的，作為一個經驗法則，應該使用在官方Node映象中建立的'node'使用者

## ![✔] 檢查並驗證最終結果

**TL;DR:** 有時很容易忽略構建過程中的副作用，如洩露的祕密或不必要的檔案。使用[Dive](https://github.com/wagoodman/dive)等工具檢查生成的映象可以很容易地幫助識別此類問題

## ![✔] 執行完整性檢查

**TL;DR:** 在拉取基本映象或最終映象時，網路可能會被誤導並重定向到下載惡意映象。除非對內容進行簽名和驗證，否則標準Docker協議中沒有任何內容可以防止這種情況。[Docker Notary](https://docs.docker.com/notary/getting_started/)是一個可以執行此類檢查的工具
