# 監控


### 一段解釋

> 在最基本的層面上，監控意味著您可以很*容易地識別出在生產環境中發生了什麼不好的事情，例如，通過電子郵件或Slack通知。挑戰在於選擇合適的工具集來滿足您的需求而不會破壞您的防護。我建議，從確定核心的指標集開始，這些指標必須被監控以確保一個健康的狀態 – CPU，伺服器的RAM，node程序RAM（小於1.4GB），在最後一分鐘的錯誤量，程序重新啟動的數量，平均響應時間。然後瀏覽一些你可能喜歡的高階功能並新增到你的願望清單中。一些豪華的監控功能的例子：資料庫分析，跨服務的測量（即測量業務交易），前端整合，暴露原始資料給自定義的BI clients，Slack通知及其他。

實現高階功能需要冗長的設定或購買商業產品如datadog，NewRelic和相似產品。不幸的是，即使是基本的實現也不像在公園散步那麼簡單，因為一些度量指標是硬體相關的（CPU），而其他的則在node程序內（內部錯誤），因此所有直接了當的工具都需要一些額外的設定。例如，雲供應商監控解決方案（如AWS CloudWatch，谷歌Stackdriver）將立即告訴你關於硬體度量，但對內部應用程式的行為卻無可奉告。在另一端，基於日誌的解決方案如Elasticsearch預設情況下缺少hardware view。解決方案是用缺少的指標來增加您的選擇，例如，一個流行的選擇是將應用程式日誌傳送到Elastic stack，並配置一些額外的代理（如Beat）來共享與硬體相關的資訊以獲得完整的畫面。

### 部落格引用: "我們對於promise有一個問題"
 摘自部落格 pouchdb.com, 對於關鍵字“node promises”，排名11
 
 > … 我們建議您為所有服務監視這些訊號：
錯誤率：因為錯誤是面向使用者的，並且會立即影響您的客戶。
響應時間：因為延遲直接影響您的客戶和業務。
吞吐量：流量有助於您瞭解錯誤率增加和延遲的上下文。
飽和度：它告訴您的服務負載多少。如果CPU使用率是90%，你的系統能處理更多的流量嗎？
…  
